Воскресная Школа разработчика  - Зима 2020
Талгат Ракишев  
t1gerok.tr@gmail.com  
Омск, ОмГУПС, Механический, 2018 г.


1. Введение

	Поликлинике нужен сайт, на котором администраторы поликлиники могли бы добавлять и удалять врачей, вести расписание приема врачей, а пациенты - записываться на прием к тому или иному врачу.
	Вам предстоит написать прототип серверной части приложения, который будет работать 2 месяца с момента его ввода в пробную эксплуатацию.
Руководство поликлиники предполагает, что высказанные им требования к сайту являются логичными и непротиворечивыми. Так ли это в действительности или нет - должно выясниться в процессе разработки и пробной эксплуатации сайта. Если в ходе разработки или пробной эксплуатации появится необходимость корректировки тех или иных пунктов задания, то этот вопрос должен обсуждаться совместно представителями заказчика и разработчика с внесением в случае необходимости изменений в техническое задание.  Изменения возможны как на клиентской, так и на серверной стороне.
Везде на сервере используется локальное (местное) время.
Дата всегда задается “дд-мм-гггг”, время -  “чч:мм”. Дни недели указываются в виде текстовой строки - “Mon”, “Tue”, “Wed”, “Thu”, “Fri”
В выходные дни (суббота и воскресенье) поликлиника не работает. В данной версии программы не учитывается наличие праздничных дней.



2. Описание системы.
2.1. Администраторы, врачи  и пациенты.


Администраторы и врачи на сервере самостоятельно не регистрируются, их регистрирует администратор. Изначально на сервере существует один администратор с именем admin и паролем, который задается при развертывании сервера. Этот администратор может зарегистрировать нового администратора, который  получает такие же права на сервере. 
Любой администратор может зарегистрировать врача, указав медицинскую специальность, по которой он будет вести приём и расписание приема.  
Пациенты  регистрируются на сервере самостоятельно . 
Администраторы и пациенты могут изменить свои регистрационные данные, но не могут изменять логин. Список врачебных специальностей (терапевт, хирург и т.д.) задается в таблице БД , которая не подлежит редактированию средствами API данного сервера.  Каждый врач может принимать только по одной специальности, хотя может быть несколько врачей одной и той же специальности. Каждому врачу назначается свой кабинет для приема.  Номера кабинетов задаются в таблице БД,  которая также не подлежит редактированию средствами API данного сервера. Номера кабинетов могут содержать нецифровые символы.
Администратор может изменить расписание приема врача, но только при условии, что не имеется записей к этому врачу, начиная с даты изменения, и на все последующие дни.
Администратор может удалить врача при увольнении последнего. В этом случае отменяются все записи на прием к нему, начиная с даты увольнения.
Администратор, задавая расписание приема, должен указать время, отводимое на одного пациента и график приема врача. На основании этих данных формируется ежедневное расписание приема врача, представляющее собой набор из дат и значений времени начала очередного приема. . Установленное администратором расписание действует вплоть до его изменения.

Врач  может узнать свое ежедневное расписание приема, с указанием, какое время занято (в этом случае возвращаются также данные пациента) и какое свободно.



2.2. Запись к врачу.

Пациент может узнать расписание работы любого врача или всех врачей , или всех врачей указанной специальности, с указанием, какое время у врача/врачей свободно, и какое занято.
Пациент может записаться на прием (получить талон). При записи на прием пациент должен указать конкретного врача или специальность врача, к которому он записывается, дату и время. Если это время у врача свободно, производится запись на прием и выдается талон, в противном случае пациент получает отказ в записи. Записаться на прием  можно только на дату, отстоящую от текущей не более, чем на 2 месяца. 
	После записи к врачу пациенту высылаются письмо на его e-mail и смс на его сотовый телефон.
В сложных случаях может оказаться, что для лечения пациента необходимо собрать врачебную комиссию из нескольких врачей. Такую комиссию может назначить только врач, он же и выбирает время для комиссии - в это время все врачи, участвующие в комиссии, должны быть свободны, а пациент не должен быть записан к другому врачу или на другую комиссию. 
Пациент может записаться к нескольким врачам, но не может записаться более одного раза к одному и тому же врачу на один и тот же день. Пациент не может записаться на время, которое даже частично пересекается с временем его другой записи на прием, в том числе и на врачебной комиссии.
Пациент может в любой момент до приема отказаться от талона, в этом случае указанное в талоне время приема врача вновь объявляется свободным. Пациент может отказаться от приема на врачебной комиссии.
Если врач был удален, всем записавшимся пациентам высылаются письма и смс об отмене приема. Все запланированные врачебные комиссии с участием этого врача отменяются, пациентам также высылаются письма и смс об отмене комиссии.
